############################
# üîê CLIENT AUTHENTICATION TESTS
############################
# Complete testing guide for client registration, login, and profile management

### üìå CONFIGURATION
@baseUrl = http://localhost:3000
@contentType = application/json
@clientToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxZTQxZmRmNS1mMGI3LTQ5NDEtODdiMS1iODgyMzEyYWE3MGUiLCJlbWFpbCI6ImpvaG4uc2tpbGxlZEBleGFtcGxlLmNvbSIsInR5cGUiOiJjbGllbnQiLCJpYXQiOjE3NjIwMDI3MDksImV4cCI6MTc2MjA4OTEwOX0.bL1IErmpRiZyX3mRJM5cSaa--ttWmdUe-NUZRh3Cc9U
# ‚ö° QUICK START - Run These 3 Tests (Takes 2 minutes)
############################
# Follow these steps in order:
# 1. Run: Register a new client
# 2. Copy the email from response
# 3. Run: Login with that email
# 4. Copy the access_token from response
# 5. Paste token in @clientToken at top
# 6. Run: Get Profile with token

### 1Ô∏è‚É£ REGISTER - Create new account
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "test-{{$timestamp}}@example.com",
  "password": "SecurePass123!",
  "phone": "+1234567890",
  "immigrationType": "skilled-worker"
}

###

### 2Ô∏è‚É£ LOGIN - Get access token
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "test-1730000000@example.com",
  "password": "SecurePass123!"
}

###

### 3Ô∏è‚É£ GET PROFILE - Verify authentication works
GET {{baseUrl}}/clients/profile
Authorization: Bearer {{clientToken}}

###

############################
# üìã VIEW ALL CLIENTS
############################

### Get all registered clients (requires token)
GET {{baseUrl}}/clients
Authorization: Bearer {{clientToken}}

###

############################
# ‚úÖ REGISTRATION TESTS
############################

### Register: Skilled Worker
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "John Doe",
  "email": "john.skilled@example.com",
  "password": "SecurePass123!",
  "phone": "+1234567890",
  "immigrationType": "skilled-worker"
}

###

### Register: Family Sponsorship
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Maria Garcia",
  "email": "maria.family@example.com",
  "password": "FamilyPass123!",
  "phone": "+1555666777",
  "immigrationType": "family-sponsorship"
}

###

### Register: Student Visa
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Chen Wei",
  "email": "chen.student@example.com",
  "password": "StudentPass123!",
  "phone": "+1666777888",
  "immigrationType": "student"
}

###

### Register: Business Immigration
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "David Smith",
  "email": "david.business@example.com",
  "password": "BusinessPass123!",
  "phone": "+1777888999",
  "immigrationType": "business"
}

###

### Register: Refugee Status
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Ahmed Ali",
  "email": "ahmed.refugee@example.com",
  "password": "RefugeePass123!",
  "phone": "+1888999000",
  "immigrationType": "refugee"
}

###

### Register: No Immigration Type
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Sarah Johnson",
  "email": "sarah.notype@example.com",
  "password": "NoTypePass123!",
  "phone": "+1999000111"
}

###

### Register: Special Characters in Name
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Fran√ßois M√ºller-O'Brien",
  "email": "francois.special@example.com",
  "password": "SpecialPass123!",
  "phone": "+1111222333",
  "immigrationType": "skilled-worker"
}

###

### Register: International Phone
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Yuki Tanaka",
  "email": "yuki.japan@example.com",
  "password": "JapanPass123!",
  "phone": "+81-90-1234-5678",
  "immigrationType": "skilled-worker"
}

###

### Register: Long Name
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Christopher Alexander Montgomery Wellington III",
  "email": "christopher.long@example.com",
  "password": "LongNamePass123!",
  "phone": "+1222333444",
  "immigrationType": "business"
}

###

############################
# üîê LOGIN TESTS (Valid)
############################

### Login: Valid Credentials
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "john.skilled@example.com",
  "password": "SecurePass123!"
}

###

### Login: Multiple Attempts (Same User)
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "maria.family@example.com",
  "password": "FamilyPass123!"
}

###

############################
# ‚ùå ERROR CASES - LOGIN
############################

### ERROR: Email Not Found
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "nonexistent@example.com",
  "password": "SecurePass123!"
}

###

### ERROR: Wrong Password
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "john.skilled@example.com",
  "password": "WrongPassword!"
}

###

### ERROR: Missing Email
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "password": "SecurePass123!"
}

###

### ERROR: Missing Password
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "john.skilled@example.com"
}

###

### ERROR: Email Case Sensitivity
POST {{baseUrl}}/clients/login
Content-Type: {{contentType}}

{
  "email": "JOHN.SKILLED@EXAMPLE.COM",
  "password": "SecurePass123!"
}

###

############################
# ‚ùå ERROR CASES - REGISTRATION
############################

### ERROR: Duplicate Email
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Jane Doe",
  "email": "john.skilled@example.com",
  "password": "AnotherPass123!",
  "phone": "+1987654321",
  "immigrationType": "family-sponsorship"
}

###

### ERROR: Invalid Email Format
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "invalid-email",
  "password": "SecurePass123!",
  "phone": "+1122334455"
}

###

### ERROR: Weak Password (Too Short)
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "weak.password@example.com",
  "password": "123",
  "phone": "+1122334455"
}

###

### ERROR: Missing Password
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "missing.password@example.com",
  "phone": "+1122334455"
}

###

### ERROR: Missing Email
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "password": "SecurePass123!",
  "phone": "+1122334455"
}

###

### ERROR: Missing Name
POST {{baseUrl}}/clients/register
Content-Type: {{contentType}}

{
  "email": "missing.name@example.com",
  "password": "SecurePass123!",
  "phone": "+1122334455"
}

###

############################
# üîì PROFILE TESTS
############################

### Get Profile: With Valid Token
GET {{baseUrl}}/clients/profile
Authorization: Bearer {{clientToken}}

###

### Get Profile: No Token
GET {{baseUrl}}/clients/profile

###

### Get Profile: Invalid Token
GET {{baseUrl}}/clients/profile
Authorization: Bearer invalid.jwt.token

###

### Get Profile: Malformed Token
GET {{baseUrl}}/clients/profile
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9

###

### Get Profile: Expired Token
GET {{baseUrl}}/clients/profile
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjE1MTYyMzkwMjJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c

###

############################
# üìä EXPECTED STATUS CODES
############################
# 200 - Success (OK)
# 201 - Created (Registration successful)
# 400 - Bad Request (Missing or invalid fields)
# 401 - Unauthorized (Invalid credentials or token)
# 409 - Conflict (Email already exists)
# 500 - Server Error

############################
# üí° TIPS & TRICKS
############################
# - Use {{$timestamp}} to generate unique emails
# - Copy the email from register response before logging in
# - Copy the access_token from login response to @clientToken
# - Refresh @clientToken if you get 401 on profile endpoint
# - Test error cases to understand API behavior
# - Check backend logs for debugging info
